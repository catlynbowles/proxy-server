{
  "version": 3,
  "sources": ["../src/middlewares/timeout.ts"],
  "sourcesContent": ["import { MiddleWareFunction } from '../types';\n\nconst defaults = { timeout: 0 };\n\nexport const middlewareTimeout: MiddleWareFunction = (inFetch) => (inUrl, inInit?) => {\n  const { timeout, ...options } = { ...defaults, ...inInit };\n  if (timeout <= 0) return inFetch(inUrl, options);\n  const controller = new AbortController();\n  const { signal } = controller;\n\n  // set timeout timer.\n  const timeoutId = setTimeout(() => {\n    controller.abort();\n  }, timeout);\n\n  return inFetch(inUrl, { signal, ...options })\n    .then((response) => {\n      clearTimeout(timeoutId);\n      return response;\n    })\n    .catch((error) => {\n      const isAbortErr = error.name === 'AbortError';\n      throw isAbortErr ? new Error('Timeout') : error;\n    });\n};\n"],
  "mappings": "AAEA,IAAMA,EAAW,CAAE,QAAS,CAAE,EAEjBC,EAAyCC,GAAY,CAACC,EAAOC,IAAY,CACpF,GAAM,CAAE,QAAAC,EAAS,GAAGC,CAAQ,EAAI,CAAE,GAAGN,EAAU,GAAGI,CAAO,EACzD,GAAIC,GAAW,EAAG,OAAOH,EAAQC,EAAOG,CAAO,EAC/C,IAAMC,EAAa,IAAI,gBACjB,CAAE,OAAAC,CAAO,EAAID,EAGbE,EAAY,WAAW,IAAM,CACjCF,EAAW,MAAM,CACnB,EAAGF,CAAO,EAEV,OAAOH,EAAQC,EAAO,CAAE,OAAAK,EAAQ,GAAGF,CAAQ,CAAC,EACzC,KAAMI,IACL,aAAaD,CAAS,EACfC,EACR,EACA,MAAOC,GAAU,CAEhB,MADmBA,EAAM,OAAS,aACf,IAAI,MAAM,SAAS,EAAIA,CAC5C,CAAC,CACL",
  "names": ["defaults", "middlewareTimeout", "inFetch", "inUrl", "inInit", "timeout", "options", "controller", "signal", "timeoutId", "response", "error"]
}
